!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?(t.disabled=!0,t.classList.add(o.inactiveButtonClass)):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},o=document.querySelector(".profile__edit-button"),n=document.querySelector("#edit-profile-modal"),r=n.querySelector(".modal__close-button"),s=n.querySelector(".modal__form"),a=n.querySelector("#profile-name-input"),c=n.querySelector("#profile-description-input"),i=document.querySelector("#new-post-modal"),l=i.querySelector(".modal__form"),u=i.querySelector("#card-caption-input"),d=i.querySelector("#card-image-input"),m=document.querySelector(".profile__add-button"),p=l.querySelector(".modal__submit-button"),_=document.querySelector("#preview-modal"),f=_.querySelector(".modal__close-button"),y=_.querySelector(".modal__image"),v=_.querySelector(".modal__caption"),S=i.querySelector(".modal__close-button"),b=document.querySelector(".profile__name"),g=document.querySelector(".profile__description"),q=document.querySelector("#card-template"),w=document.querySelector(".cards__list");function h(e){const t=q.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name;const r=t.querySelector(".card__link-button");r.addEventListener("click",function(){r.classList.toggle("card__link-button_active")}),n.addEventListener("click",()=>{y.src=e.link,v.textContent=e.name,y.alt=e.name,E(_)});const s=t.querySelector(".card__delete-button");return s.addEventListener("click",function(){s.closest(".card").remove()}),t}function L(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&C(e)}}function k(e){e.target.classList.contains("modal")&&C(e.target)}function E(e){e.classList.add("modal_is-opened"),e.addEventListener("mousedown",k),document.addEventListener("keydown",L)}function C(e){e.classList.remove("modal_is-opened"),e.removeEventListener("mousedown",k),document.removeEventListener("keydown",L)}var x;f.addEventListener("click",function(){C(_)}),o.addEventListener("click",function(){a.value=b.textContent,c.value=g.textContent,E(n)}),r.addEventListener("click",function(){C(n)}),m.addEventListener("click",function(){E(i)}),S.addEventListener("click",function(){C(i)}),s.addEventListener("submit",function(e){e.preventDefault(),b.textContent=a.value,g.textContent=c.value,C(n)}),l.addEventListener("submit",function(t){t.preventDefault();const o=h({name:u.value,link:d.value});var n,r;w.prepend(o),l.reset(),r=e,(n=p).disabled=!0,n.classList.add(r.inactiveButtonClass),C(i)}),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(function(e){const t=h(e);w.prepend(t)}),x=e,document.querySelectorAll(x.formSelector).forEach(e=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),r=e.querySelector(o.submitButtonSelector);t(n,r,o),n.forEach(s=>{s.addEventListener("input",()=>{((e,t,o)=>{t.validity.valid?((e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);n&&(n.textContent="",n.classList.remove(o.errorClass)),t.classList.remove(o.inputErrorClass)})(e,t,o):((e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);n&&(n.textContent=t.validationMessage,n.classList.add(o.errorClass)),t.classList.add(o.inputErrorClass)})(e,t,o)})(e,s,o),t(n,r,o)})})})(e,x)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsU0FBVUMsR0FDN0IsTUFBTWhDLEVBQWNGLEVBQWVrQyxHQUNuQ25DLEVBQVVnQyxRQUFRN0IsRUFDcEIsR0R4R2lDbkMsRUN5R2hCVixFRHhHRXFCLFNBQVN5RCxpQkFBaUJwRSxFQUFPVCxjQUN6QzJFLFFBQVNHLElBaEJLQyxFQUFDRCxFQUFRckUsS0FDaEMsTUFBTUYsRUFBWXlFLE1BQU1DLEtBQUtILEVBQU9ELGlCQUFpQnBFLEVBQU9SLGdCQUN0RE8sRUFBV3NFLEVBQU96RCxjQUFjWixFQUFPUCxzQkFFN0NJLEVBQWtCQyxFQUFXQyxFQUFVQyxHQUV2Q0YsRUFBVW9FLFFBQVNPLElBQ2pCQSxFQUFRM0IsaUJBQWlCLFFBQVMsS0FoQ1g0QixFQUFDTCxFQUFRSSxFQUFTekUsS0FDdEN5RSxFQUFRdEUsU0FBU0MsTUFWRHVFLEVBQUNOLEVBQVFJLEVBQVN6RSxLQUN2QyxNQUFNNEUsRUFBYVAsRUFBT3pELGNBQWUsSUFBRzZELEVBQVFJLFlBQ2hERCxJQUNGQSxFQUFXaEMsWUFBYyxHQUN6QmdDLEVBQVdyRSxVQUFVRSxPQUFPVCxFQUFPSixhQUVyQzZFLEVBQVFsRSxVQUFVRSxPQUFPVCxFQUFPTCxrQkFPOUJnRixDQUFlTixFQUFRSSxFQUFTekUsR0F0QmI4RSxFQUFDVCxFQUFRSSxFQUFTekUsS0FDdkMsTUFBTTRFLEVBQWFQLEVBQU96RCxjQUFlLElBQUc2RCxFQUFRSSxZQUNoREQsSUFDRkEsRUFBV2hDLFlBQWM2QixFQUFRTSxrQkFDakNILEVBQVdyRSxVQUFVQyxJQUFJUixFQUFPSixhQUVsQzZFLEVBQVFsRSxVQUFVQyxJQUFJUixFQUFPTCxrQkFjM0JtRixDQUFlVCxFQUFRSSxFQUFTekUsSUErQjlCMEUsQ0FBbUJMLEVBQVFJLEVBQVN6RSxHQUNwQ0gsRUFBa0JDLEVBQVdDLEVBQVVDLFFBUXpDc0UsQ0FBaUJELEVBQVFyRSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay1kZW1vLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLWRlbW8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGlmIChlcnJvck1zZ0VsKSB7XG4gICAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNc2dFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGlmIChlcnJvck1zZ0VsKSB7XG4gICAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNc2dFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfVxufTtcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxufTtcbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXIgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXIoZm9ybUVsLCBjb25maWcpO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZGlzYWJsZUJ1dHRvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvblwiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy83LXBob3RvLWJ5LWdyaWZmaW4td29vbGRyaWRnZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQ2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxuKTtcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLW5hbWUtaW5wdXRcIlxuKTtcbmNvbnN0IGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWwgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG5ld1Bvc3RDYXB0aW9uSW5wdXQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWNhcHRpb24taW5wdXRcIik7XG5jb25zdCBuZXdQb3N0SW1hZ2VJbnB1dCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2UtaW5wdXRcIik7XG5jb25zdCBuZXdQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgY2FyZFN1Ym1pdEJ1dHRvbiA9IGFkZENhcmRGb3JtRWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBwcmV2aWV3SW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdOYW1lRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuY29uc3QgbmV3UG9zdENsb3NlQnV0dG9uID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcblxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkVGl0bGVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG5cbiAgY29uc3QgY2FyZExpa2VCdG5FbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGluay1idXR0b25cIik7XG4gIGNhcmRMaWtlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjYXJkTGlrZUJ0bkVsLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saW5rLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdOYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld0ltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xuXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gIH0pO1xuICBjb25zdCBjYXJkRGVsZXRlQnRuRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gIGNhcmREZWxldGVCdG5FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNhcmREZWxldGVCdG5FbC5jbG9zZXN0KFwiLmNhcmRcIikucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxucHJldmlld0Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNsb3NlTW9kYWwocHJldmlld01vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBpZiAob3BlbmVkTW9kYWwpIHtcbiAgICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVPdmVybGF5Q2xvc2UoZXZ0KSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XG4gICAgY2xvc2VNb2RhbChldnQudGFyZ2V0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVPdmVybGF5Q2xvc2UpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZUVsLnRleHRDb250ZW50O1xuICBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb25FbC50ZXh0Q29udGVudDtcblxuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcbmVkaXRQcm9maWxlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5uZXdQb3N0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59XG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdCk7XG5cbmFkZENhcmRGb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICBuYW1lOiBuZXdQb3N0Q2FwdGlvbklucHV0LnZhbHVlLFxuICAgIGxpbms6IG5ld1Bvc3RJbWFnZUlucHV0LnZhbHVlLFxuICB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmREYXRhKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICBhZGRDYXJkRm9ybUVsLnJlc2V0KCk7XG4gIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ1dHRvbiwgdmFsaWRhdGlvbkNvbmZpZyk7XG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG59KTtcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XG4iXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsImNvbmZpZyIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImVkaXRQcm9maWxlQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRQcm9maWxlQ2xvc2VCdXR0b24iLCJlZGl0UHJvZmlsZUZvcm0iLCJlZGl0UHJvZmlsZU5hbWVJbnB1dCIsImVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsIm5ld1Bvc3RNb2RhbCIsImFkZENhcmRGb3JtRWwiLCJuZXdQb3N0Q2FwdGlvbklucHV0IiwibmV3UG9zdEltYWdlSW5wdXQiLCJuZXdQb3N0QnV0dG9uIiwiY2FyZFN1Ym1pdEJ1dHRvbiIsInByZXZpZXdNb2RhbCIsInByZXZpZXdDbG9zZUJ0biIsInByZXZpZXdJbWFnZUVsIiwicHJldmlld05hbWVFbCIsIm5ld1Bvc3RDbG9zZUJ1dHRvbiIsInByb2ZpbGVOYW1lRWwiLCJwcm9maWxlRGVzY3JpcHRpb25FbCIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZUVsIiwiY2FyZEltYWdlRWwiLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsInRleHRDb250ZW50IiwiY2FyZExpa2VCdG5FbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJjYXJkRGVsZXRlQnRuRWwiLCJjbG9zZXN0IiwiaGFuZGxlRXNjYXBlIiwiZXZ0Iiwia2V5Iiwib3BlbmVkTW9kYWwiLCJjbG9zZU1vZGFsIiwiaGFuZGxlT3ZlcmxheUNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiZGlzYWJsZUJ1dHRvbiIsInByZXBlbmQiLCJyZXNldCIsImZvckVhY2giLCJpdGVtIiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm1FbCIsInNldEV2ZW50TGlzdGVuZXIiLCJBcnJheSIsImZyb20iLCJpbnB1dEVsIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvck1zZ0VsIiwiaWQiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=